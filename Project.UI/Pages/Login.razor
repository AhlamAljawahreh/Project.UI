@page "/login"
@using Project.DataModels;
@using Project.UI.Services;
@inject ILoginService _loginService;
@inject LoginService login;
@inject NavigationManager NavigationManager;

@code {


    private UserCred user { set; get; } = new UserCred();

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        // Data = await _loginService.Authenticate(UserCred user);
    }

    public async void onSubmit()
    {
        Console.WriteLine("done");
        Console.WriteLine(user.Username);
        Console.WriteLine(user.Password);
        Result httpResponse = await _loginService.Authenticate(user);

        Console.WriteLine($"Done? {httpResponse.Token}  ");
        if (login.result.Role=="Admin")
        {
            NavigationManager.NavigateTo("/");

        }
        //Console.WriteLine("Wait");
    }



}


<h3>GridView</h3>


<EditForm Model=@user OnSubmit="@onSubmit">
    <div class="form-group">
        <label>UserName</label>
        <InputText id="username" class="form-control" name="userName" @bind-Value="user.Username"></InputText>
    </div>
    <div class="form-group">
        <label>Password </label>
        <InputText id="Password" type="password" class="form-control" name="Password" @bind-Value="user.Password"></InputText>
    </div>
    <button type="submit">Submit</button>
</EditForm>